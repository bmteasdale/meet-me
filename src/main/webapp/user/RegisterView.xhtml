<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                template="/template/_template.xhtml">
    <ui:define name="centerpane">
        <p:layout id="layout">
            <p:layoutUnit position="center" collapsible="true" gutter="0">
                
                <!-- Navigation Bar -->
                <nav class="navbar navbar-expand-lg navbar-light bg-light" style="font-family: Raleway;">
                    <div class="container-fluid">
                      <a class="navbar-brand" href="/meet-me">MeetMe</a>
                      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                      </button>
                      <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
                        <div class="navbar-nav" style="font-family: Raleway; font-weight: bold;">              
                          <a class="nav-link" href="/meet-me/user/LoginView.xhtml">Login</a>
                          <a class="nav-link" href="/meet-me/user/RegisterView.xhtml">Register</a>
                        </div>
                      </div>
                    </div>
                </nav>
                
                <!-- Register Form -->
                <form style="font-family: Raleway; margin: 0 auto; width: 50%; text-align: center;">
                    <p:growl id="registerGrowl" showDetail="true" sticky="false"/>
                    <f:passThroughAttribute name="autocomplete" value="off"/>
                    <img src="../resources/images/add_user.png" alt="addUser" style="height: 200px;"/>
                    <div class="card">
                        <br/><br/>
                        <h2>Register with a new account</h2><br/>
                        <div class="input-group mb-3">
                            <h:inputText 
                                id="fname"
                                value="#{userBean.firstName}"
                                class="form-control" 
                                a:placeholder="First Name" 
                                required="true"/>
                            <h:inputText
                                id="lname"
                                value="#{userBean.lastName}"
                                class="form-control" 
                                a:placeholder="Last Name" 
                                required="true"/>
                        </div>
                        <div class="input-group mb-3" style="font-family: Raleway;">
                            <h:inputText
                                id="username"
                                value="#{userBean.username}"
                                class="form-control"
                                a:placeholder="Username" 
                                required="true"/>
                        </div>
                        <div class="input-group mb-3" style="font-family: Raleway;">
                            <h:inputText
                                id="email"
                                value="#{userBean.email}"
                                class="form-control" 
                                a:placeholder="Email"                                 
                                required="true"/>
                        </div>
                        <div class="input-group mb-3" style="font-family: Raleway;">
                            <h:inputSecret
                                id="password"
                                value="#{userBean.password}"
                                class="form-control" 
                                a:placeholder="Create Password" 
                                required="true"/>
                        </div>
                        <div class="input-group mb-3" style="font-family: Raleway;">
                            <h:inputSecret 
                                id="confirmPassword"
                                value="#{userBean.confirmPassword}"
                                class="form-control" 
                                a:placeholder="Confirm Password" 
                                required="true"/>
                        </div>
                        <div class="d-grid gap-2" style="font-family: Raleway;">
                            
                            <!-- input values are not updating -->
                            <h:commandButton 
                                class="btn btn-primary" 
                                value="Register"
                                actionListener="#{userBean.showRegistrationMessage()}"
                                onclick="#{userBean.handleRegistration(userBean.username, userBean.password, userBean.confirmPassword, userBean.firstName, userBean.lastName, userBean.email)}"
                                >
                                <f:ajax execute="@form"/>
                            </h:commandButton>
                            
                        </div>
                        <br/>
                        <hr style="margin: 0 auto; width: 75%"/>
                        <div>
                            <p>Already have an account?</p>
                            <h:button value="Login" class="btn btn-primary" outcome="login"></h:button>
                        </div>
                    </div>
                </form>
                <br/><br/>
            </p:layoutUnit>
        </p:layout>
    </ui:define>
</ui:composition>
